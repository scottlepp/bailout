<ion-header>
  <ion-toolbar>
    <ion-title class="title">Bail Bond</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
<form form [formGroup]="bondForm" (ngSubmit)="onSubmit(bondForm.value)" *ngIf="showForm">
  <ion-list>

    <ion-item>
      <ion-label fixed>Power #</ion-label>
      <ion-input type="text" [formControl]="bondForm.controls.bond.controls.power" [(ngModel)]="bond.power"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label fixed>Amount $</ion-label>
      <ion-input [textMask]="{mask: numberMask}" type="text" [formControl]="bondForm.controls.bond.controls.amount" [(ngModel)]="bond.amount"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label fixed>County</ion-label>
      <ion-input type="text" [formControl]="bondForm.controls.bond.controls.county" [(ngModel)]="bond.county"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label fixed>Source</ion-label>
      <ion-input type="text" [formControl]="bondForm.controls.bond.controls.source" [(ngModel)]="bond.source"></ion-input>
    </ion-item>

    <ion-item-group>
      <ion-item-divider color="light">Defendant</ion-item-divider>

      <ion-item>
        <ion-label fixed>First</ion-label>
        <ion-input type="text" [formControl]="bondForm.controls.bond.controls.defendantFirst" [(ngModel)]="bond.defendantFirst"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label fixed>Middle</ion-label>
        <ion-input type="text" [formControl]="bondForm.controls.bond.controls.defendantMiddle" [(ngModel)]="bond.defendantMiddle"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label fixed>Last</ion-label>
        <ion-input type="text" [formControl]="bondForm.controls.bond.controls.defendantLast" [(ngModel)]="bond.defendantLast"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label fixed>Phone #</ion-label>
        <ion-input [textMask]="{mask: phoneMask}" type="text" [formControl]="bondForm.controls.bond.controls.phone" [(ngModel)]="bond.phone"></ion-input>
      </ion-item>

    </ion-item-group>

    <ion-item-group>
      <ion-item-divider color="light">Indemnitor</ion-item-divider>
      <ion-item>
        <ion-label fixed>First</ion-label>
        <ion-input type="text" [formControl]="bondForm.controls.bond.controls.indemnitorFirst" [(ngModel)]="bond.indemnitorFirst"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label fixed>Middle</ion-label>
        <ion-input type="text" [formControl]="bondForm.controls.bond.controls.indemnitorMiddle" [(ngModel)]="bond.indemnitorMiddle"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label fixed>Last</ion-label>
        <ion-input type="text" [formControl]="bondForm.controls.bond.controls.indemnitorLast" [(ngModel)]="bond.indemnitorLast"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label fixed>Phone #</ion-label>
        <ion-input [textMask]="{mask: phoneMask}" type="text" [formControl]="bondForm.controls.bond.controls.indPhone" [(ngModel)]="bond.indPhone"></ion-input>
      </ion-item>

    </ion-item-group>
    <ion-item>
      <ion-label>Date</ion-label>
      <ion-datetime displayFormat="MM/DD/YYYY" [(ngModel)]="bond.date" [formControl]="bondForm.controls.bond.controls.date"></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>Status</ion-label>
      <ion-select [(ngModel)]="bond.status" [formControl]="bondForm.controls.bond.controls.status">
        <ion-option value="open">Open</ion-option>
        <ion-option value="sentenced">Sentenced</ion-option>
        <ion-option value="dismissed">Dismissed</ion-option>
      </ion-select>
    </ion-item>

    <!--<ion-item>
      <ion-label>Signature</ion-label>
      <ion-input [(ngModel)]="bond.signature" [formControl]="bondForm.controls.bond.controls.signature" (tap)="sign($event)">
      </ion-input>
    </ion-item>-->
  </ion-list>

  <ion-row *ngIf="!editing">
    <ion-col>
    <button type="submit" ion-button color="primary" [disabled]="!bondForm.valid || saving" block>Save</button>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="editing">
    <ion-col>
    <button type="submit" ion-button color="primary" [disabled]="!bondForm.valid || saving" block>Save</button>
    </ion-col>
    <ion-col>
    <button type="button" ion-button color="dark" outline block (click)="close($event)">Close</button>
    </ion-col>
  </ion-row>

  <!--<div padding *ngIf="editing">
    <button ion-button color="dark" outline block>Close</button>
  </div>-->

</form>
</ion-content>